:css
  .img_size{
    max-width: 300px;
    max-height: 300px;
  }
  .fl {
    float:left;
  }

- @posts.each do |p|
  %div{:id => "#{p.id}"}
    %div.panel.panel-success
      %div.panel-heading
        %b=link_to("#{p.title.truncate(30).capitalize}","/posts/#{p.id}")
      %div.panel-body.fl
        %img.img_size{:src=>p.avatar}
      %div.panel-body
        %b=p.description
      %div.panel-body.own_time_format 
        %b Posted 
        #{time_ago_in_words(p.created_at)} ago
      %div.panel-body 
        %b Posted by :
        #{p.user.email}
      -if current_user.id == p.user_id.to_i 
        %div.panel-body
          %b=link_to("Delete this post","javascript:void(0)","data-id" => "#{p.id}",:class => "delete_post")
      %div.panel-body 
        %b No of comments: 
        #{p.comments.where("is_archive =? ",false).count}
      %div.panel-body 
        %b No of likes: 
        #{p.likes.where("is_liked =? ",true).count}
      %div.panel-body
        - if p.likes.where("is_liked =?", true).empty?
          = link_to "javascript:void(0)",:class => "liked_post","data-id" => p.id,:id => "liked_post_"+"#{p.id}" do
            %span.glyphicon.glyphicon-thumbs-up
        - else
          You have liked this post
          = link_to "javascript:void(0)",:class => "liked_post","data-id" => p.id,:id => "liked_post_"+"#{p.id}",:style => "color:green" do
            %span.glyphicon.glyphicon-thumbs-up
      
      
=link_to("Create a new post",posts_new_path,:class=>"btn btn-success")

:javascript
  $(".delete_post").click(function() 
    {
      if(confirm("Are you sure..???"))
      {
        var id = $(this).data('id');
        $.ajax({
          type: 'DELETE',
          url: "/posts/delete_post/"+id,
          data:{'post_id': id},
          success: function(data)
          { 

          }, 
          error: function(data){ alert('error'); } 
        })
      }
    });


  $(".liked_post").click(function() 
  {
    var id = $(this).data('id');
    $.ajax({
      type: 'PATCH',
      url: "/posts/like_post/"+id,
      success: function(data)
      { 
        $("#liked_post_"+id).attr('style','color:green');
      }, 
      error: function(data){ alert('error'); } 
    })   
  });
